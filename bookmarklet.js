javascript:(function(){try{const laTexCode=prompt('Paste your Springer LaTeX content:');if(!laTexCode||laTexCode.trim()===''){alert('No content provided.');return;}function decodeLatexAccents(str){if(!str)return'';const map={'\\v{s}':'š','\\v{S}':'Š','\\v{c}':'č','\\v{C}':'Č','\\v{z}':'ž','\\v{Z}':'Ž','\\v{e}':'ě','\\v{E}':'Ě','\\v{n}':'ň','\\v{N}':'Ň','\\v{r}':'ř','\\v{R}':'Ř','\\v{t}':'ť','\\v{T}':'Ť','\\\'{a}':'á','\\\'{A}':'Á','\\\'{e}':'é','\\\'{E}':'É','\\\'{i}':'í','\\\'{I}':'Í','\\\'{o}':'ó','\\\'{O}':'Ó','\\\'{u}':'ú','\\\'{U}':'Ú','\\\'{y}':'ý','\\\'{Y}':'Ý','\\r{u}':'ů','\\r{U}':'Ů'};for(const key in map){str=str.replaceAll(key,map[key]);}return str;}function extractBalanced(str,startIndex){let i=startIndex,depth=1;while(i<str.length&&depth>0){if(str[i]==='{')depth++;if(str[i]==='}')depth--;i++;}return str.slice(startIndex,i-1);}function extractFirstName(block){const pos=block.indexOf('\\\\fnm{');if(pos===-1)return'';const start=block.indexOf('{',pos)+1;return decodeLatexAccents(extractBalanced(block,start));}function extractSurname(block){const pos=block.indexOf('\\\\sur{');if(pos===-1)return'';const start=block.indexOf('{',pos)+1;return decodeLatexAccents(extractBalanced(block,start));}function parseAuthors(tex){const authors=[];const regex=/\\\\author\*?\[([^\]]+)\]\{([\s\S]*?)\}\\\\email\{([^}]*)\}/g;let m;while((m=regex.exec(tex))){const affils=m[1].split(',').map(x=>x.trim());const block=m[2];const email=m[3];const fn=extractFirstName(block);const sn=extractSurname(block);const isCorresponding=block.includes('\\\\corref')||m[0].includes('\\\\author*');authors.push({firstName:fn,lastName:sn,email,affils,isCorresponding});}return authors;}function extractAffils(tex){const out=[];let pos=0;while(true){const start=tex.indexOf('\\\\affil',pos);if(start===-1)break;const idx=tex.slice(start).match(/\\\\affil\*?\[([0-9]+)\]/);if(!idx)break;const index=idx[1];const braceStart=tex.indexOf('{',start)+1;const block=extractBalanced(tex,braceStart);out.push({index,block});pos=braceStart+block.length;}return out;}function parseAffiliationBlock(block){function get(cmd){const m=block.match(new RegExp('\\\\\\\\'+cmd+'\\\\{([^}]*)\\\\}'));return m?decodeLatexAccents(m[1].trim()):'';};return{dep:get('orgdiv'),org:get('orgname'),street:get('street'),city:get('city'),postcode:get('postcode'),state:get('state'),country:get('country')};}function parseSpringer(tex){tex=tex.replace(/%.*/g,'');let title='';const titlePos=tex.indexOf('\\\\title{');if(titlePos!==-1){const titleStart=tex.indexOf('{',titlePos)+1;title=extractBalanced(tex,titleStart);}let abstract='';const beginAbstractPos=tex.indexOf('\\\\begin{abstract}');if(beginAbstractPos!==-1){const abstractStart=beginAbstractPos+'\\\\begin{abstract}'.length;const abstractEnd=tex.indexOf('\\\\end{abstract}',abstractStart);if(abstractEnd!==-1){abstract=tex.slice(abstractStart,abstractEnd).trim();if(abstract.startsWith('{}'))abstract=abstract.substring(2);}}else{const abstractPos=tex.indexOf('\\\\abstract{');if(abstractPos!==-1){const abstractStart=tex.indexOf('{',abstractPos)+1;abstract=extractBalanced(tex,abstractStart);}}const authors=parseAuthors(tex);const rawAff=extractAffils(tex);const affils=rawAff.map(a=>({index:a.index,...parseAffiliationBlock(a.block)}));return{title,abstract,authors,affils};}const data=parseSpringer(laTexCode);function setInputValue(selector,value){const input=document.querySelector(selector);if(input){input.value=value;input.dispatchEvent(new Event('input',{bubbles:true}));input.dispatchEvent(new Event('change',{bubbles:true}));}}const titleInputs=Array.from(document.querySelectorAll('input[type="text"]')).filter(inp=>inp.placeholder&&inp.placeholder.includes('Title'));if(titleInputs.length>0){setInputValue('input[placeholder*="Title"]',data.title);}const abstractInputs=Array.from(document.querySelectorAll('textarea')).filter(ta=>ta.placeholder&&ta.placeholder.includes('abstract'));if(abstractInputs.length>0){const abstractArea=abstractInputs[0];abstractArea.value=data.abstract;abstractArea.dispatchEvent(new Event('input',{bubbles:true}));}data.authors.forEach((author,idx)=>{const authorSection=document.querySelector(`[data-author-index="${idx}"]`);if(authorSection){const details=authorSection.querySelector('details');if(details&&!details.open){details.open=true;}const givenNameInputs=authorSection.querySelectorAll('input[type="text"]');if(givenNameInputs.length>0){givenNameInputs[0].value=author.firstName;givenNameInputs[0].dispatchEvent(new Event('input',{bubbles:true}));}if(givenNameInputs.length>1){givenNameInputs[1].value=author.lastName;givenNameInputs[1].dispatchEvent(new Event('input',{bubbles:true}));}const emailInputs=authorSection.querySelectorAll('input[type="email"]');if(emailInputs.length>0){emailInputs[0].value=author.email;emailInputs[0].dispatchEvent(new Event('input',{bubbles:true}));}if(author.affils.length>0){const affSelect=authorSection.querySelector('select');if(affSelect&&data.affils[author.affils[0]-1]){const affOrg=data.affils[author.affils[0]-1].org;const option=Array.from(affSelect.options).find(opt=>opt.text.includes(affOrg));if(option){affSelect.value=option.value;affSelect.dispatchEvent(new Event('change',{bubbles:true}));}}}}}});alert('✓ Form pre-filled!\\n\\nReview all fields and adjust as needed.');}catch(e){alert('Error: '+e.message);}})();
